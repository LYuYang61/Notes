# 4 、多无人机网络技术相关论文
## 一、Robust Permissioned Blockchain Consensus for  Unstable Communication in FANET
- 论文地址：https://doi.org/10.1109/TNET.2023.3295378
### 1、研究问题
- 本文提出了一种**面向不稳定通信环境的 FANET（飞行自组网）许可型区块链共识协议 RoUBC**，以提升在高动态、链路不稳定条件下的信息一致性与效率
- 该方案基于 Raft 协议，包括两个阶段：
	1. **领导者选举阶段**：集成了多准则决策（MCDM） 算法和链路预测算法，设计出一种高效且稳定的 Leader 选举方法
	2. **区块共识阶段**：提出了一种基于历史验证信息的动态区块验证算法，以在仅有部分节点连通的不稳定 FANET 中实现高效的区块共识

![image.png](https://qingwu-oss.oss-cn-heyuan.aliyuncs.com/lian/img/20251011102914.png)

### 2、系统模型
- 一个合作的 FANET 由许多功能相似、能力有限的无人机组成
- 所有 UAV 节点都是**可信节点**，不存在恶意节点或拜占庭攻击。系统关注通信故障而非节点作恶
- 链路具有高不稳定性：UAV 间的通信链路可能随飞行状态（速度、距离、任务）变化而频繁断开
- 链路预测可得：通过历史位置与运动信息可进行短期拓扑预测
- 节点通过无线中继转发共识消息，整个 FANET 不依赖中心基站

![image.png](https://qingwu-oss.oss-cn-heyuan.aliyuncs.com/lian/img/20251011092357.png)

- 本文将网络中无人机（UAV）分为三种状态——跟随者（Follower）、候选者（Candidate）、领导者（Leader）
- 常规运行中无人机处于任一状态，会依特定触发条件转换以达成共识，且因状态与拓扑持续变化，无人机不会长期处于同一状态
- **各状态定义与转换**：
    - **Follower**：无人机加入区块链后自动成为该状态，负责领导者选举投票、验证领导者打包的区块、接收领导者下发的全网重要性值并存储区块；当自身重要性达到特定阈值（重要性阈值）时，自动转为候选者
    - **Candidate**：介于领导者与跟随者之间的过渡状态，选举获胜则转为领导者，选举失败或发现更重要节点则转为跟随者，且该状态下无人机无法打包和验证区块
    - **Leader**：从候选者中选出，为当前网络中重要性最高的无人机，负责收集网络交易、为跟随者打包区块；当发现网络中有新领导者时，自动转为对应轮次的跟随者
- **额外机制**：
	- 无人机群中所有无人机定期向领导者发送网络拓扑与状态信息
	- 领导者在选举期间收集当期网络及节点状态信息，同时基于收集的当前状态预测未来一段时间的网络拓扑，并通过节点重要性评估算法（算法 1）**计算所有节点的重要性**，以确定待验证区块的共识阈值与候选者无人机的重要性阈值

![image.png](https://qingwu-oss.oss-cn-heyuan.aliyuncs.com/lian/img/20251011094133.png)

### 3、阶段一：基于 VIKOR 与链路预测的稳定领导者选举
#### 3.1 VIKOR 多准则决策方法
- RoUBC 采用了 **VIKOR** 方法，这是一种经典的**多准则决策方法（MCDM）**，该方法专门用于解决存在**冲突且不可公度**（即使用不同计量单位）的评估标准下的决策问题
- 在 VIKOR 的计算过程中，它计算了两个关键指标：**群体效益值** $S_i$ ​和**个体遗憾值** $R_i$ ​ ，并引入决策系数 v（论文中设定 v=0.5），最终计算出节点的综合重要性 Qi​ 值（算法 1）
- RoUBC 综合考量了以下五个因素来构建 VIKOR 决策矩阵，评估无人机在 FANET 中的**综合重要性** $sI_k$：
	- **节点度** $D_i$：反映 $U_i​$ 的邻居数量，度高的节点能将选举和区块消息传播给更多节点，提高消息到达率
	- **节点中介性** $C_i$：衡量节点在网络最短路径中的重要性，中介性高的 Leader 能更好地覆盖多跳通信路径，对网络连通性至关重要
	- **节点剩余能量** $E_{is}$：确保 Leader 拥有持续担任服务所需的电量，避免因能量耗尽引发 Leader 意外切换
	- **节点剩余计算能力** $C_{is}$：保证 Leader 能够高效处理区块打包、哈希计算以及执行 $O(n^2)$ 复杂度的 VIKOR 评估
	- **节点平均故障率** $P_i$：衡量节点的长期物理和系统稳定性，高 $P_i​$ 值意味着节点故障间隔时间长，Leader 更加可靠
#### 3.2 动态选举阈值 eTi 的计算与选举流程
- 在第 i 轮共识开始前，上一轮 Leader $L_{i−1}$ ​ 首先利用动态链路预测算法（例如基于线性测量系统的框架 ），以当前拓扑 $G_{i−1}$ ​、UAV 速度列表 sL 和任务类型 tT 为输入，预测下一轮网络拓扑 $G_i​$
- 随后，$L_{i−1}$ ​调用算法 1 计算基于预测拓扑 $G_i​$ 的所有节点的 Q 值（重要性），并将该重要性列表中的第 K 个值确定为当前轮次的**动态选举重要性阈值 eTi​**（算法 2） 
- $L_{i−1}$ ​会将该 $eT_i​$ 广播给整个集群，之后，接收到 $eT_i​$ 的无人机将启动选举过程
- **选举流程**（算法 3） 遵循以下机制：
	1. 只有当 UAV Uk的自身重要性 $sI_k​$ **大于或等于** $eT_i​$ 时，才有资格发起选举操作 $eV_k​$ 并转换为 Candidate 状态
	2. 当 UAV Uj​ 收到选举请求 $eR_k​$ 时，它会比较自身的 $sI_j$ ​ 和请求者 $sI_k$ ​
		- 如果 $sIj​≤sIk​$，则 Uj​ 投票给 Uk​
		- 如果 $sIj​>sIk​$，则 Uj​ 将拒绝 Uk​，并立即发起自己的选举请求 $eR_j​$
	3. 选举遵循“一机一票，先到先得”原则：当候选者 Uk​ 收集到超过半数选票 (N/2) 时，即宣布选举成功，转换为 Leader 状态 $L_i​$
- 动态阈值 $eT_i$ ​ 的引入确保了即使在网络状态恶化时，系统也能选出一个重要性达到最低标准的节点，从而保证了 Leader 的可转换性和系统的整体鲁棒性，有效避免了因传统 Raft 随机性选出不稳定 Leader 而导致的频繁重选
### 4、阶段二：动态历史相关区块共识机制
#### 4.1 FANET 适应性区块结构优化
- 为适应 FANET 中 UAV 资源受限的特点，RoUBC 对区块结构进行了优化

![image.png](https://qingwu-oss.oss-cn-heyuan.aliyuncs.com/lian/img/20251011141424.png)

- **区块头**：包含前一区块头部和尾部哈希值 pHash（用于链完整性校验）、leader 身份 id、下一个 leader 的选举重要性阈值 eleThreshold 和当前区块验证阈值 verThreshold 等关键信息
- 为了减轻 UAV 的计算负担，RoUBC 做出了关键的优化：
	- 用**排序交易哈希**（Sorted-Transaction Hash, mRoot）替代了传统的 Merkle Root 
	- 在传统 Merkle Tree 中，验证区块数据完整性需要 2n−1 次哈希操作，而 RoUBC 的替代方案**只需 1 次哈希操作**
	- 这一优化显著降低了 leader 在打包和 Follower 在验证时的计算开销
- **区块体**：按字典序排序的共享数据 Dx
- **区块尾**：包含**历史验证信息** approveList，记录了本区块的验证者及其状态，这一信息被用于下一轮共识的动态连续性检查
#### 4.2 动态验证阈值 vTi 的确定
- 为了应对高丢包率下等待所有节点响应导致的验证失败或超时问题，RoUBC 引入了基于 Leader 邻居数的**动态验证阈值** $vT_i​$
- 传统的共识机制要求 leader 必须收到全网多数节点（例如 N/2+1）的验证才能确认区块
- 但在 FANET 中，如果 leader 坚持等待那些与自己连接质量差或拓扑位于边缘的节点响应，共识将变得极慢甚至失败
- 动态 $vT_i​$ ​允许 Leader 仅需获得与其**当前连接状态最可靠**的一组节点的验证即可确认区块
- $vT_i​$ **计算机制**（算法 4）：
	- Leader Li​ 首先利用链路预测模型获取当前预测拓扑 Gi​
	- 随后，它计算自己在 Gi​ 中的邻居数量 nN，并将动态验证阈值 vTi​ 定义为 vTi​=nN/N 
	- 最终，区块 Bi​ 必须收到的验证总数至少是 vTi​ * N
#### 4.3 基于历史信息的区块验证算法
- RoUBC 引入的**动态区块验证算法**（算法 5）确保了在网络连接动态变化的情况下，共识仍能高效且安全地进行
- Leader Li​ 必须满足两个独立的验证条件才能将区块 Bi​ 永久添加到链上：
	1. **动态数量要求**：Li​ 必须收到的验证信息总长度必须满足 $Len ≥ vT_i​ * N$
	2. **历史连续性要求**：Li​ 必须确保本次验证列表中，与上一区块 $B_{i−1}$ ​ 的 $Foot_{i−1}$ ​（长度为 m）中记录的验证者**重合的 UAV 数量**必须满足 $smUAV≥vT_i​*m$
- 通过强制要求一个**核心且稳定的验证子集**（由 smUAV 衡量）在连续两轮共识中出现，极大地提高了系统的抗临时性链路失败能力，确保了链的连续性和一致性
- **区块共识流程**：
	1. **Leader 提议区块 (Block Proposal)**：
		- 当选的 leader Li​ 会尽可能多地收集网络中所有未确认的交易数据 Dx
		- Li​ 对收集到的数据进行完整性验证，然后根据 RoUBC 定义的区块结构（包含 Head, Body, Foot 三部分）将其打包成一个新的未确认区块 Bi​
		- Li​ 随后将这个新生成的区块 Bi​ 广播给整个无人机集群中的所有 Follower
	2. **Follower 验证区块 (Block Validation)**：
		- 当 follower Uk​ 接收到 leader 广播的区块 Bi​ 后，它首先会验证该区块的完整性
		- 如果验证通过，Uk​ 会向 Li​ 发送一个**区块声明消息**（$blockStatement_i={cHeight, Id_{F_k}​​}$），表明它同意将此区块添加到链上
		- 此时 Uk​ 并不会立即将 Bi​ 添加到本地链上，而是等待 leader Li​ 完成**步骤三**（最终确认）的消息
	3. **Leader 添加区块 (Block )**：
		- Leader Li​ 在收集到跟随者的区块声明消息后，会使用**动态区块验证算法**来判断 Bi​ 是否满足添加到链上的条件
		- 如果区块 Bi​ 成功通过算法 5 的验证，则 Li​ 将其**永久添加**到区块链上，并广播这条链更新的消息给整个集群

![image.png](https://qingwu-oss.oss-cn-heyuan.aliyuncs.com/lian/img/20251011153430.png)
